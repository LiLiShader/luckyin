window.__require=function e(t,r,n){function a(o,c){if(!r[o]){if(!t[o]){var s=o.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+o+"'")}o=s}var u=r[o]={exports:{}};t[o][0].call(u.exports,function(e){return a(t[o][1][e]||e)},u,u.exports,e,t,r,n)}return r[o].exports}for(var i="function"==typeof __require&&__require,o=0;o<n.length;o++)a(n[o]);return a}({Betting:[function(e,t,r){"use strict";cc._RF.push(t,"8f2046y5rVP5qGWDNdEghmS","Betting"),Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){this.betAmount=10,this.playerBalance=100}return e.prototype.placeBet=function(e){this.betAmount=e},e.prototype.win=function(){this.playerBalance+=2*this.betAmount;for(var e=cc.find("Canvas/Player Node"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(0,255,56,255);cc.find("Canvas/playerScoreNode").color=cc.color(0,255,56,255)},e.prototype.winLeft=function(){this.playerBalance+=2*this.betAmount;for(var e=cc.find("Canvas/Player Node left"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(0,255,56,255);cc.find("Canvas/playerleftScoreNode").color=cc.color(0,255,56,255)},e.prototype.winRight=function(){this.playerBalance+=2*this.betAmount;for(var e=cc.find("Canvas/Player Node right"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(0,255,56,255);cc.find("Canvas/playerrightScoreNode").color=cc.color(0,255,56,255)},e.prototype.loseLeft=function(){this.playerBalance-=this.betAmount;for(var e=cc.find("Canvas/Player Node left"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(255,0,0,255);cc.find("Canvas/playerleftScoreNode").color=cc.color(255,0,0,255)},e.prototype.loseRight=function(){this.playerBalance-=this.betAmount;for(var e=cc.find("Canvas/Player Node right"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(255,0,0,255);cc.find("Canvas/playerrightScoreNode").color=cc.color(255,0,0,255)},e.prototype.pushLeft=function(){for(var e=cc.find("Canvas/Player Node left"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(255,255,0,255);cc.find("Canvas/playerleftScoreNode").color=cc.color(255,255,0,255)},e.prototype.pushRight=function(){for(var e=cc.find("Canvas/Player Node right"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(255,255,0,255);cc.find("Canvas/playerrightScoreNode").color=cc.color(255,255,0,255)},e.prototype.winBlackjack=function(){this.playerBalance+=2.5*this.betAmount},e.prototype.lose=function(){this.playerBalance-=this.betAmount,console.log("lose",this.playerBalance);for(var e=cc.find("Canvas/Player Node"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(255,0,0,255);cc.find("Canvas/playerScoreNode").color=cc.color(255,0,0,255)},e.prototype.push=function(){console.log("push",this.playerBalance);for(var e=cc.find("Canvas/Player Node"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("Sign").active=!0,e.children[t].getChildByName("Sign").color=cc.color(255,255,0,255);cc.find("Canvas/playerScoreNode").color=cc.color(255,255,0,255)},e.prototype.doubleBet=function(){this.betAmount*=2},e.prototype.getBalance=function(){return this.playerBalance},e}();r.default=n,cc._RF.pop()},{}],Card:[function(e,t,r){"use strict";cc._RF.push(t,"04c7bq+V/JBpbm4w7DhH/UT","Card"),Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){this.suit=e,this.rank=t}return e.prototype.getValue=function(){var e;switch(this.rank){case 1:e=11;break;case 11:case 12:case 13:e=10;break;default:e=this.rank}return e},e.prototype.isAce=function(){return 1===this.rank},e}();r.default=n,cc._RF.pop()},{}],Deck:[function(e,t,r){"use strict";cc._RF.push(t,"fddc5FD1u1PsJbYg7fQzWZX","Deck"),Object.defineProperty(r,"__esModule",{value:!0});r.default=function(){this.cards=[]},cc._RF.pop()},{}],GameHttp:[function(e,t,r){"use strict";cc._RF.push(t,"82852cRw/lN0q8Pxeux/iUP","GameHttp");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(r,"__esModule",{value:!0});var o=cc._decorator,c=o.ccclass,s=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.start=function(){},i([c],t)}(cc.Component));r.default=s,cc._RF.pop()},{}],Game:[function(e,t,r){"use strict";cc._RF.push(t,"b9c5bLZ81JPaL1bKdVXxiPb","Game");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{s(n.next(e))}catch(t){i(t)}}function c(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(c){i=[6,c],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var s=e("./Deck"),l=e("./Player"),u=e("./Betting"),d=e("./LanguageManager"),h=e("../scriptHttp/HttpRequest"),p=e("./Card"),f=cc._decorator,y=f.ccclass,g=f.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pre_card=null,t.CardBack=null,t.dealerNode=null,t.playerNode=null,t.playerNodeLeft=null,t.playerNodeRight=null,t.playerScoreLabel=null,t.dealerScoreLabel=null,t.playerLeftScoreLabel=null,t.playerRightScoreLabel=null,t.playerLeftisOver=!1,t.playerRightisOver=!1,t.nowWho="player",t.divideCard=null,t.divideCardMian="",t.betButton=null,t.hitButton=null,t.standButton=null,t.doubleDownButton=null,t.divideButton=null,t.isDoubleDown=!1,t.currentBetLabel=null,t.halfBetButton=null,t.doubleBetButton=null,t.insuranceButton=null,t.noInsuranceButton=null,t.currentBet=0,t.insuranceBet=0,t.player21=!1,t.playerLeft21=!1,t.playerRight21=!1,t.recordId=-1,t.bankerCardList=[],t.playerCardList=[],t.isActive=!1,t.token="jm4zl5m97uz99m4sjd8sj9tx0rnv5ns6",t.currency=1,t.currencyName="BTC",t.maxStake=100,t.minStake=1,t.leftArray={},t.rightArray={},t.iserror=!1,t.betnum=0,t.TEXT_LABEL=null,t}return a(t,e),t.prototype.saveRecordId=function(){cc.sys.localStorage.setItem("blackjack_recordId",this.recordId.toString())},t.prototype.loadRecordId=function(){null!==cc.sys.localStorage.getItem("blackjack_recordId")&&(this.recordId=-1)},t.prototype.onLoad=function(){var e=this;this.loadRecordId(),this.deck=new s.default,this.betting=new u.default,this.dealer=this.dealerNode.getComponent(l.default),this.player=this.playerNode.getComponent(l.default),this.playerLeft=this.playerNodeLeft.getComponent(l.default),this.playerRight=this.playerNodeRight.getComponent(l.default);var t=window.location.href;switch(console.log("\u5f53\u524d\u6e38\u620f\u7684URL:",t),t.substring(t.lastIndexOf("=")+1)){case"zh":d.default.getInstance().setLanguage(d.LanguageType.CN);break;case"en":d.default.getInstance().setLanguage(d.LanguageType.EN);break;case"ar":d.default.getInstance().setLanguage(d.LanguageType.Ar);break;case"fr":d.default.getInstance().setLanguage(d.LanguageType.FR);break;case"jp":d.default.getInstance().setLanguage(d.LanguageType.JP);break;default:d.default.getInstance().setLanguage(d.LanguageType.EN)}this.token=this.getTokenFromUrl(t),this.currency=this.getCurrencyFromUrl(t),this.currencyName=this.getCurrencyNameFromUrl(t),console.log("\u83b7\u53d6\u5230\u7684token:",this.token),console.log("\u83b7\u53d6\u5230\u7684currency:",this.currency),console.log("\u83b7\u53d6\u5230\u7684currencyName:",this.currencyName),h.default.getInstance().token=this.token,cc.resources.load("icon/"+this.currencyName,cc.SpriteFrame,function(e,t){cc.find("Canvas/UI/BG/NumBG/icon").getComponent(cc.Sprite).spriteFrame=t}),""==this.token&&(cc.find("Canvas/NotLoggedIn").active=!0),this.initTextLabel(),console.log("\u5f53\u524d\u7684recordId:",this.recordId),-1!=this.recordId&&h.default.getInstance().info(this.recordId).then(function(t){console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",t),e.continueGame(t.data.playerCardList,t.data.bankerCardList)}).catch(function(e){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",e)}),h.default.getInstance().getgameDetail(29).then(function(t){console.log(t),e.maxStake=t.data.maxStake,e.minStake=t.data.minStake})},t.prototype.getTokenFromUrl=function(e){try{var t=e.match(/token=([^&]*)/);return t&&t[1]?t[1]:""}catch(r){return console.error("\u89e3\u6790token\u5931\u8d25:",r),""}},t.prototype.getCurrencyFromUrl=function(e){try{var t=e.match(/currency=(\d+)/);return t&&t[1]?parseInt(t[1]):1}catch(r){return console.error("\u89e3\u6790currency\u5931\u8d25:",r),1}},t.prototype.getCurrencyNameFromUrl=function(e){try{var t=e.match(/currencyName=([^&]*)/);if(t&&t[1]){var r=t[1];if(/^[A-Z]+$/.test(r))return r}return"BTC"}catch(n){return console.error("\u89e3\u6790 currencyName \u5931\u8d25:",n),"BTC"}},t.prototype.continueGame=function(e,t){return o(this,void 0,void 0,function(){var r;return c(this,function(n){switch(n.label){case 0:this.updateButtonStates(!1,!1,!1,!1),this.playerCardList=e,this.bankerCardList=t,r=0,n.label=1;case 1:return r<this.playerCardList.length?[4,this.player.hand.addCard(new p.default(1,this.playerCardList[r].num),this.player.isDealer,this.pre_card)]:[3,4];case 2:n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return[4,this.dealer.hand.addCard(new p.default(1,this.bankerCardList[0].num),this.dealer.isDealer,this.pre_card)];case 5:return n.sent(),[4,this.dealer.hand.addCard(new p.default(0,0),this.dealer.isDealer,this.pre_card)];case 6:return n.sent(),11!==this.dealer.hand.cards[0].getValue()||this.player.hand.isBlackjack()?this.updateButtonStates(!0,!0,!0,!1):this.showInsuranceOptions(),this.updateScores(),[2]}})})},t.prototype.startNewRound=function(){this.isActive=!1,this.playerCardList=[],this.bankerCardList=[],this.player21=!1,this.playerLeft21=!1,this.playerRight21=!1,this.nowWho="player",cc.find("Canvas/playerScoreNode").color=cc.color(47,69,83,255),cc.find("Canvas/playerScoreNode/playerScoreLabel").getComponent(cc.Label).string="0",cc.find("Canvas/dealerScoreNode/dealerScoreLabel").getComponent(cc.Label).string="0",this.playerLeftScoreLabel.node.parent.active=!1,this.playerRightScoreLabel.node.parent.active=!1,this.playerScoreLabel.node.parent.active=!0,this.updateBetDisplay(),this.dealer.resetHand(),this.player.resetHand(),this.playerLeft.resetHand(),this.playerRight.resetHand(),this.isDoubleDown=!1,this.updateButtonStates(!0,!0,!0,!1),this.dealCard()},t.prototype.dealCard=function(){return o(this,void 0,Promise,function(){var e,t,r,n=this;return c(this,function(a){switch(a.label){case 0:return this.updateButtonStates(!1,!1,!1,!1),e=!1,[4,h.default.getInstance().bet(this.betnum,this.currency,29).then(function(t){if("insufficient funds"==t.msg)return console.log("\u4f59\u989d\u4e0d\u8db3"),cc.find("Canvas/Insufficient Balance").active=!0,void(e=!0);console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",t),n.playerCardList.push(t.data.playerCardList[0]),n.playerCardList.push(t.data.playerCardList[1]),n.bankerCardList=t.data.bankerCardList,n.recordId=t.data.id,n.saveRecordId()}).catch(function(e){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",e)})];case 1:return a.sent(),e?[2]:[4,this.player.hand.addCard(new p.default(1,this.playerCardList[0].num),this.player.isDealer,this.pre_card)];case 2:return a.sent(),[4,this.player.hand.addCard(new p.default(1,this.playerCardList[1].num),this.player.isDealer,this.pre_card)];case 3:return a.sent(),[4,this.dealer.hand.addCard(new p.default(1,this.bankerCardList[0].num),this.dealer.isDealer,this.pre_card)];case 4:return a.sent(),[4,this.dealer.hand.addCard(new p.default(0,0),this.dealer.isDealer,this.pre_card)];case 5:return a.sent(),11!==this.dealer.hand.cards[0].getValue()||this.player.hand.isBlackjack()?this.updateButtonStates(!0,!0,!0,!1):this.showInsuranceOptions(),t=cc.find("Canvas/Player Node").children[0].getChildByName("Card").getChildByName("Label").getComponent(cc.Label).string,r=cc.find("Canvas/Player Node").children[1].getChildByName("Card").getChildByName("Label").getComponent(cc.Label).string,t===r&&(this.divideCard=this.player.hand.cards[0].rank,this.divideCardMian=t,this.updateButtonStates(!0,!0,!0,!1,!0)),this.updateScores(),[2]}})})},t.prototype.showInsuranceOptions=function(){this.insuranceButton.node.active=!0,this.noInsuranceButton.node.active=!0,this.hitButton.node.active=!1,this.standButton.node.active=!1,this.doubleDownButton.node.active=!1},t.prototype.divide=function(){return o(this,void 0,Promise,function(){var e,t=this;return c(this,function(r){switch(r.label){case 0:return[4,h.default.getInstance().divide(this.recordId).then(function(e){t.leftArray=e.data[1],t.rightArray=e.data[0],console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",e)}).catch(function(e){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",e)})];case 1:for(r.sent(),console.log(this.leftArray.playerCardList[1].num,this.rightArray.playerCardList[1].num),this.playerLeftScoreLabel.node.parent.active=!0,this.playerRightScoreLabel.node.parent.active=!0,this.playerScoreLabel.node.parent.active=!1,this.playerLeftScoreLabel.node.parent.color=cc.color(47,69,83,255),this.playerRightScoreLabel.node.parent.color=cc.color(47,69,83,255),this.updateButtonStates(!1,!1,!1,!1,!1),e=cc.find("Canvas/Player Node").childrenCount-1;e>=0;e--)cc.find("Canvas/Player Node").children[e].parent=null;return[4,this.playerLeft.hand.addCard(new p.default(1,this.divideCard),this.player.isDealer,this.pre_card,"left")];case 2:return r.sent(),[4,this.playerRight.hand.addCard(new p.default(1,this.divideCard),this.player.isDealer,this.pre_card,"right")];case 3:return r.sent(),[4,this.playerLeft.hand.addCard(new p.default(1,this.leftArray.playerCardList[1].num),this.player.isDealer,this.pre_card,"left")];case 4:return r.sent(),[4,this.playerRight.hand.addCard(new p.default(1,this.rightArray.playerCardList[1].num),this.player.isDealer,this.pre_card,"right")];case 5:return r.sent(),this.updateButtonStates(!0,!1,!0,!1,!1),this.player.hand.clear(),this.nowWho="playerRight",this.updateScores(),this.divideColor(),[2]}})})},t.prototype.divideColor=function(){if("playerRight"==this.nowWho)for(var e=cc.find("Canvas/Player Node right").childrenCount-1;e>=0;e--)cc.find("Canvas/Player Node right").children[e].getChildByName("Signn").active=!0,cc.find("Canvas/Player Node right").children[e].getChildByName("Signn").color=cc.color(0,148,255,255);else{for(e=cc.find("Canvas/Player Node right").childrenCount-1;e>=0;e--)cc.find("Canvas/Player Node right").children[e].getChildByName("Signn").active=!1;for(e=cc.find("Canvas/Player Node left").childrenCount-1;e>=0;e--)cc.find("Canvas/Player Node left").children[e].getChildByName("Signn").active=!0,cc.find("Canvas/Player Node left").children[e].getChildByName("Signn").color=cc.color(0,148,255,255)}},t.prototype.buyInsurance=function(){return o(this,void 0,Promise,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,h.default.getInstance().buyInsurance(this.recordId).then(function(t){e.bankerCardList=t.data.bankerCardList,console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",t,e.dealer.hand.cards[1],t.data.bankerCardList[1])}).catch(function(e){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",e)})];case 1:return t.sent(),this.insuranceBet=this.currentBet/2,this.hideInsuranceOptions(),this.dealer.hand.isBlackjack()?(this.dealerNode.children[1].getChildByName("CardBack").active=!1,this.currentBet-=this.insuranceBet,this.updateBetDisplay(),this.endRound("insurance")):(this.currentBet-=this.insuranceBet,this.updateBetDisplay(),this.updateButtonStates(!0,!0,!0,!1),this.player.hand.cards[0].getValue()===this.player.hand.cards[1].getValue()&&this.updateButtonStates(!0,!0,!0,!1,!0)),this.updateScores(),[2]}})})},t.prototype.noInsurance=function(){return o(this,void 0,Promise,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,h.default.getInstance().notBuyInsurance(this.recordId).then(function(t){e.bankerCardList=t.data.bankerCardList,console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",t)}).catch(function(e){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",e)})];case 1:return t.sent(),this.hideInsuranceOptions(),this.dealer.hand.isBlackjack()?(this.dealerNode.children[1].getChildByName("CardBack").active=!1,this.endRound("dealer")):(this.updateButtonStates(!0,!0,!0,!1),this.player.hand.cards[0].getValue()===this.player.hand.cards[1].getValue()&&this.updateButtonStates(!0,!0,!0,!1,!0)),this.updateScores(),[2]}})})},t.prototype.hideInsuranceOptions=function(){this.insuranceButton.node.active=!1,this.noInsuranceButton.node.active=!1,this.hitButton.node.active=!0,this.standButton.node.active=!0,this.doubleDownButton.node.active=!0},t.prototype.doubleDown=function(){return o(this,void 0,Promise,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return this.isDoubleDown?[2]:(this.betting.doubleBet(),[4,h.default.getInstance().redouble(this.recordId).then(function(t){e.playerCardList.push(t.data.playerCardList[2]);for(var r=t.data.bankerCardList,n=1;n<r.length;n++)e.bankerCardList.push(r[n]);console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",t)}).catch(function(e){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",e)})]);case 1:return t.sent(),[4,this.player.hand.addCard(new p.default(this.playerCardList[2].suit,this.playerCardList[2].num),this.player.isDealer,this.pre_card)];case 2:return t.sent(),this.isDoubleDown=!0,this.updateScores(),this.player.hand.getScore()>21?(this.updateButtonStates(!1,!1,!1,!0),this.endRound("dealer")):(this.updateButtonStates(!1,!1,!1,!0),this.dealerTurn(null,!0)),[2]}})})},t.prototype.placeBet=function(){for(var e=cc.find("Canvas/Dealer Node").childrenCount-1;e>=0;e--)cc.find("Canvas/Dealer Node").children[e].parent=null;for(e=cc.find("Canvas/Player Node").childrenCount-1;e>=0;e--)cc.find("Canvas/Player Node").children[e].parent=null;for(e=cc.find("Canvas/Player Node left").childrenCount-1;e>=0;e--)cc.find("Canvas/Player Node left").children[e].parent=null;for(e=cc.find("Canvas/Player Node right").childrenCount-1;e>=0;e--)cc.find("Canvas/Player Node right").children[e].parent=null;this.betting.placeBet(this.currentBet),this.startNewRound()},t.prototype.playerHit=function(){return o(this,void 0,Promise,function(){var e,t,r,n=this;return c(this,function(a){switch(a.label){case 0:return this.doubleDownButton.interactable=!1,this.divideButton.interactable=!1,[4,h.default.getInstance().deal(this.recordId).then(function(e){n.playerCardList.push(e.data.playerCardList[e.data.playerCardList.length-1]),n.bankerCardList=e.data.bankerCardList,console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",e)}).catch(function(e){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",e)})];case 1:switch(a.sent(),this.nowWho){case"player":return[3,2];case"playerLeft":return[3,4];case"playerRight":return[3,6]}return[3,8];case 2:return[4,this.player.hand.addCard(new p.default(this.playerCardList[this.playerCardList.length-1].suit,this.playerCardList[this.playerCardList.length-1].num),this.player.isDealer,this.pre_card)];case 3:return a.sent(),[3,9];case 4:return[4,this.playerLeft.hand.addCard(new p.default(this.playerCardList[this.playerCardList.length-1].suit,this.playerCardList[this.playerCardList.length-1].num),this.player.isDealer,this.pre_card,"left")];case 5:return a.sent(),[3,9];case 6:return[4,this.playerRight.hand.addCard(new p.default(this.playerCardList[this.playerCardList.length-1].suit,this.playerCardList[this.playerCardList.length-1].num),this.player.isDealer,this.pre_card,"right")];case 7:return a.sent(),[3,9];case 8:return[3,9];case 9:switch(this.updateScores(),console.log(this.nowWho),this.nowWho){case"playerLeft":(e=this.playerLeft.hand.getScore())>21?(this.playerLeftisOver=!0,this.endRound("playerLeftLose",!0),this.dealerTurn(null)):21===e&&(this.playerLeftisOver=!0,this.endRound("playerLeftWin",!0),this.dealerTurn(null));break;case"playerRight":(t=this.playerRight.hand.getScore())>21?(this.playerRightisOver=!0,this.endRound("playerRightLose",!0),this.nowWho="playerLeft",this.recordId+=1,this.saveRecordId(),this.divideColor()):21===t&&(this.playerRightisOver=!0,this.endRound("playerRightWin",!0),this.nowWho="playerLeft",this.recordId+=1,this.saveRecordId(),this.divideColor());break;default:(r=this.player.hand.getScore())>21?(this.updateButtonStates(!1,!1,!1,!0),this.endRound("dealer")):21===r&&(this.updateButtonStates(!1,!1,!1,!0),console.log("21"),this.dealerTurn(null))}return[2]}})})},t.prototype.updateButtonStates=function(e,t,r,n,a){void 0===a&&(a=!1),this.hitButton.interactable=e,this.doubleDownButton.interactable=t,this.standButton.interactable=r,this.betButton.interactable=n,this.divideButton.interactable=a},t.prototype.dealerTurn=function(e,t){return void 0===t&&(t=!1),o(this,void 0,Promise,function(){var e,r=this;return c(this,function(n){switch(n.label){case 0:return e=!1,"player"!=this.nowWho&&"playerLeft"!=this.nowWho?[3,2]:t?[3,2]:[4,h.default.getInstance().stop(this.recordId).then(function(e){console.log("\u83b7\u53d6\u7684\u54cd\u5e94:",e),cc.find("Canvas/playerrightScoreNode").active&&"order status error"===e.msg?(console.log("order status error"),r.recordId--,r.dealerTurn(null)):(r.bankerCardList=e.data.bankerCardList,r.recordId=-1,r.saveRecordId())}).catch(function(t){console.error("\u5904\u7406\u8bf7\u6c42\u65f6\u51fa\u9519:",t),e=!0})];case 1:n.sent(),n.label=2;case 2:return e?(this.updateButtonStates(!1,!1,!1,!0),[2]):(this.luoji(),[2])}})})},t.prototype.luoji=function(){return o(this,void 0,void 0,function(){var e,t,r,n,a;return c(this,function(i){switch(i.label){case 0:if("player"!=this.nowWho&&"playerLeft"!=this.nowWho)return[3,5];this.updateButtonStates(!1,!1,!1,!1),this.updateScores(!0),cc.find("Canvas/Dealer Node").children[1]&&(cc.find("Canvas/Dealer Node").children[1].active=!1,cc.find("Canvas/Dealer Node").children[1].parent=null),console.log(this.bankerCardList),e=1,i.label=1;case 1:return e<this.bankerCardList.length?[4,this.dealer.hand.addCard(new p.default(this.bankerCardList[e].suit,this.bankerCardList[e].num),this.dealer.isDealer,this.pre_card)]:[3,4];case 2:i.sent(),this.updateScores(!0),i.label=3;case 3:return e++,[3,1];case 4:switch(t=this.dealer.hand.getScore(),this.nowWho){case"playerLeft":r=this.playerLeft.hand.getScore(),this.playerLeftisOver||(t>21?this.endRound("playerLeftWin"):t>r?this.endRound("playerLeftLose"):t<r?this.endRound("playerLeftWin"):this.endRound("playerLeftPush")),n=this.playerRight.hand.getScore(),this.playerRightisOver||(t>21?this.endRound("playerRightWin"):t>n?this.endRound("playerRightLose"):t<n?this.endRound("playerRightWin"):this.endRound("playerRightPush")),this.playerRightisOver&&this.playerLeftisOver&&this.updateButtonStates(!1,!1,!1,!0);break;default:a=this.player.hand.getScore(),t>21?this.endRound("player"):t>a?this.endRound("dealer"):t<a?this.endRound("player"):this.endRound("push")}return[3,6];case 5:this.nowWho="playerLeft",this.recordId+=1,this.saveRecordId(),this.divideColor(),i.label=6;case 6:return[2]}})})},t.prototype.flipDealerCard=function(){return o(this,void 0,Promise,function(){var e=this;return c(this,function(){return[2,new Promise(function(t){cc.tween(e.dealerNode.children[1]).to(.2,{scaleX:0}).call(function(){e.dealerNode.children[1].getChildByName("CardBack").active=!1}).to(.2,{scaleX:1}).call(function(){t()}).start()})]})})},t.prototype.checkBlackjack=function(){this.player.hand.isBlackjack()&&this.dealer.hand.isBlackjack()?this.endRound("push"):this.player.hand.isBlackjack()?(this.betting.winBlackjack(),this.endRound("player")):this.dealer.hand.isBlackjack()&&(this.betting.lose(),this.endRound("dealer"))},t.prototype.endRound=function(e,t){void 0===t&&(t=!1),"player"===e?this.betting.win():"dealer"===e?this.betting.lose():"push"===e&&this.betting.push(),"playerLeftWin"===e?this.betting.winLeft():"playerLeftLose"===e?this.betting.loseLeft():"playerLeftPush"===e&&this.betting.pushLeft(),"playerRightWin"===e?this.betting.winRight():"playerRightLose"===e?this.betting.loseRight():"playerRightPush"===e&&this.betting.pushRight(),t||(this.updateButtonStates(!1,!1,!1,!0),this.recordId=-1,this.saveRecordId())},t.prototype.updateScores=function(e){return void 0===e&&(e=!1),o(this,void 0,void 0,function(){var t,r,n,a,i,o,s,l,u,d=this;return c(this,function(c){switch(c.label){case 0:if(t=this.player.hand.isBlackjack()?21:this.player.hand.getPossibleScores(),this.playerScoreLabel.string=""+(Array.isArray(t)?t.join(" , "):t),!this.player.hand.isBlackjack()&&21!=this.player.hand.getPossibleScores()[0]&&21!=this.player.hand.getPossibleScores()[1])return[3,6];if("player"!=this.nowWho&&"playerLeft"!=this.nowWho)return[3,5];this.updateButtonStates(!1,!1,!1,!1),cc.find("Canvas/Dealer Node").children[1].active=!1,cc.find("Canvas/Dealer Node").children[1].parent=null,console.log(this.bankerCardList),r=1,c.label=1;case 1:return r<this.bankerCardList.length?[4,this.dealer.hand.addCard(new p.default(this.bankerCardList[r].suit,this.bankerCardList[r].num),this.dealer.isDealer,this.pre_card)]:[3,4];case 2:c.sent(),c.label=3;case 3:return r++,[3,1];case 4:switch(this.scheduleOnce(function(){d.dealerScoreLabel.string=d.dealer.hand.getScore()+""}),n=this.dealer.hand.getScore(),this.nowWho){case"playerLeft":a=this.playerLeft.hand.getScore(),this.playerLeftisOver||(n>21?this.endRound("playerLeftWin"):n>a?this.endRound("playerLeftLose"):n<a?this.endRound("playerLeftWin"):this.endRound("playerLeftPush")),i=this.playerRight.hand.getScore(),this.playerRightisOver||(n>21?this.endRound("playerRightWin"):n>i?this.endRound("playerRightLose"):n<i?this.endRound("playerRightWin"):this.endRound("playerRightPush")),this.playerRightisOver&&this.playerLeftisOver&&this.updateButtonStates(!1,!1,!1,!0);break;default:o=this.player.hand.getScore(),n>21?this.endRound("player"):n>o?this.endRound("dealer"):n<o?this.endRound("player"):this.endRound("push")}return[3,6];case 5:this.nowWho="playerLeft",this.recordId+=1,this.saveRecordId(),this.divideColor(),c.label=6;case 6:return s=this.playerLeft.hand.isBlackjack()?21:this.playerLeft.hand.getPossibleScores(),this.playerLeftScoreLabel.string=""+(Array.isArray(s)?s.join(" , "):s),!this.playerLeft21&&this.playerLeft.hand.isBlackjack()&&(this.nowWho="playerLeft",this.recordId+=1,this.saveRecordId(),this.playerLeft21=!0),l=this.playerRight.hand.isBlackjack()?21:this.playerRight.hand.getPossibleScores(),this.playerRightScoreLabel.string=""+(Array.isArray(l)?l.join(" , "):l),!this.playerRight21&&this.playerRight.hand.isBlackjack()&&(this.dealerTurn(null),this.playerRight21=!0),u=this.dealer.hand.isBlackjack()&&!this.insuranceButton.node.active?21:e?this.dealer.hand.getPossibleScores():[this.dealer.hand.cards[0].getValue()],this.dealerScoreLabel.string=""+(Array.isArray(u)?u.join(" , "):u),this.divideColor(),[2]}})})},t.prototype.updateBetDisplay=function(){this.currentBetLabel.string=""+this.currentBet.toFixed(2),this.betting.placeBet(this.currentBet)},t.prototype.halfBet=function(){this.currentBet>0&&(.01==this.currentBet?this.currentBet=0:this.currentBet/=2,this.updateBetDisplay())},t.prototype.doubleBet=function(){this.currentBet*=2,0==this.currentBet&&(this.currentBet=.01),this.updateBetDisplay()},t.prototype.switchLanguage=function(){var e=d.default.getInstance().getCurrentLanguage(),t=d.default.getInstance().getNextLanguage(e);d.default.getInstance().setLanguage(t)},t.prototype.initTextLabel=function(){var e=this,t=this.TEXT_LABEL.node.parent.getComponent(cc.EditBox);t&&(t.node.on("text-changed",function(t){var r=t.string,n=r.replace(/[^0-9.]/g,""),a=n.indexOf(".");if(-1!==a){var i=n.substring(0,a+1),o=n.substring(a+1).replace(/\./g,"");n=i+o}n.startsWith(".")&&(n="0"+n);var c=Number(n);c<e.minStake?(c=e.minStake,n=e.minStake+""):c>e.maxStake&&(c=e.maxStake,n=e.maxStake+""),r!==n&&(t.string=n),e.betnum=c}),t.string=this.minStake+"",this.betnum=this.minStake)},t.prototype.ChengOrChu=function(e,t){var r;"1"==t?(this.betnum=Number(this.TEXT_LABEL.string),r=2*this.betnum):(this.betnum=Number(this.TEXT_LABEL.string),r=Number((this.betnum/2).toFixed(2))),r<this.minStake?r=this.minStake:r>this.maxStake&&(r=this.maxStake),this.betnum=r,this.TEXT_LABEL.string=r.toString()},t.prototype.newgame=function(){cc.director.loadScene("mainSceneHttp")},t.prototype.openOrclose=function(e,t){cc.find("Canvas/Guize").active="1"==t},i([g(cc.Prefab)],t.prototype,"pre_card",void 0),i([g(cc.Prefab)],t.prototype,"CardBack",void 0),i([g(cc.Node)],t.prototype,"dealerNode",void 0),i([g(cc.Node)],t.prototype,"playerNode",void 0),i([g(cc.Node)],t.prototype,"playerNodeLeft",void 0),i([g(cc.Node)],t.prototype,"playerNodeRight",void 0),i([g(cc.Label)],t.prototype,"playerScoreLabel",void 0),i([g(cc.Label)],t.prototype,"dealerScoreLabel",void 0),i([g(cc.Label)],t.prototype,"playerLeftScoreLabel",void 0),i([g(cc.Label)],t.prototype,"playerRightScoreLabel",void 0),i([g(cc.Button)],t.prototype,"betButton",void 0),i([g(cc.Button)],t.prototype,"hitButton",void 0),i([g(cc.Button)],t.prototype,"standButton",void 0),i([g(cc.Button)],t.prototype,"doubleDownButton",void 0),i([g(cc.Button)],t.prototype,"divideButton",void 0),i([g(cc.Label)],t.prototype,"currentBetLabel",void 0),i([g(cc.Button)],t.prototype,"halfBetButton",void 0),i([g(cc.Button)],t.prototype,"doubleBetButton",void 0),i([g(cc.Button)],t.prototype,"insuranceButton",void 0),i([g(cc.Button)],t.prototype,"noInsuranceButton",void 0),i([g(cc.Label)],t.prototype,"TEXT_LABEL",void 0),i([y],t)}(cc.Component);r.default=v,cc._RF.pop()},{"../scriptHttp/HttpRequest":"HttpRequest","./Betting":"Betting","./Card":"Card","./Deck":"Deck","./LanguageManager":"LanguageManager","./Player":"Player"}],Hand:[function(e,t,r){"use strict";cc._RF.push(t,"db1c7eUXvtK4KduieLNMWfv","Hand"),Object.defineProperty(r,"__esModule",{value:!0});var n=e("./Game"),a=function(){function e(){this.cards=[]}return e.prototype.addCard=function(e,t,r,a){var i=this;return void 0===a&&(a="no"),new Promise(function(o){var c=cc.instantiate(r),s=cc.v2(550,1e3);c.parent=t?cc.find("Canvas/Dealer Node"):"left"==a?cc.find("Canvas/Player Node left"):"right"==a?cc.find("Canvas/Player Node right"):cc.find("Canvas/Player Node"),c.setPosition(s);var l=Math.floor(4*Math.random());c.getChildByName("Card").children[l].active=!0;var u=cc.v2(0,0);u=c.parent.childrenCount>1?cc.v2(49*(c.parent.childrenCount-1),c.parent.children[c.parent.childrenCount-2].getPosition().y-30):cc.v2(0,0),cc.find("/Card/Label",c).getComponent(cc.Label).string=i.clickRank(e.rank),cc.find("Canvas/Game Node").getComponent(n.default).isActive&&t&&2===cc.find("Canvas/Dealer Node").childrenCount?(c.setPosition(u),cc.tween(c).to(.2,{scaleX:0}).call(function(){c.getChildByName("CardBack").active=!1}).to(.2,{scaleX:1}).call(function(){i.cards.push(e),o()}).start()):cc.tween(c).to(.5,{position:cc.v3(u)}).call(function(){2!=c.parent.childrenCount||"Dealer Node"!=c.parent.name?cc.tween(c).to(.2,{scaleX:0}).call(function(){c.getChildByName("CardBack").active=!1}).to(.2,{scaleX:1}).call(function(){i.cards.push(e),o()}).start():(cc.find("Canvas/Game Node").getComponent(n.default).isActive=!0,i.cards.push(e),o())}).start()})},e.prototype.clickRank=function(e){if(cc.find("Canvas/playerScoreNode").active)switch(e){case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return e.toString()}else switch(e){case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return e.toString()}},e.prototype.getScore=function(){var e=0,t=0;for(this.cards.forEach(function(r){e+=r.getValue(),r.isAce()&&t++});e>21&&t>0;)e-=10,t--;return e},e.prototype.getPossibleScores=function(){var e=0,t=0;if(this.cards.forEach(function(r){var n=r.isAce()?1:r.getValue();e+=n,r.isAce()&&t++}),0===t)return[e];var r=e+10;return r>21?[e]:[e,r]},e.prototype.isBlackjack=function(){return 2===this.cards.length&&21===this.getScore()},e.prototype.isBust=function(){return this.getScore()>21},e.prototype.clear=function(){this.cards=[]},e}();r.default=a,cc._RF.pop()},{"./Game":"Game"}],HttpClient:[function(e,t,r){"use strict";cc._RF.push(t,"4de84l2QRJCIY5yLmVAbvtO","HttpClient");var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{s(n.next(e))}catch(t){i(t)}}function c(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,c)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(c){i=[6,c],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e){this.baseUrl=e}return e.prototype.get=function(e,t){return n(this,void 0,Promise,function(){var r,n;return a(this,function(a){switch(a.label){case 0:return r=this.buildUrl(e,t),[4,fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return n=a.sent(),[2,this.handleResponse(n)]}})})},e.prototype.post=function(e,t,r,i){return n(this,void 0,Promise,function(){var t,n,o;return a(this,function(a){switch(a.label){case 0:return t=""+this.baseUrl+e,n={"Content-Type":"application/json"},r&&(n.Authorization="Bearer "+r),i&&(n["time-zone"]=i),[4,fetch(t,{method:"POST",headers:n})];case 1:return o=a.sent(),[2,this.handleResponse(o)]}})})},e.prototype.buildUrl=function(e,t){var r=""+this.baseUrl+e;return t&&(r+="?"+new URLSearchParams(t).toString()),r},e.prototype.handleResponse=function(e){return n(this,void 0,Promise,function(){return a(this,function(){return[2,e.json()]})})},e}();r.default=i,cc._RF.pop()},{}],HttpRequest:[function(e,t,r){"use strict";cc._RF.push(t,"1ccb2HGmURBlbdYofq9mFB8","HttpRequest");var n=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{s(n.next(e))}catch(t){i(t)}}function c(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(c){i=[6,c],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./HttpClient"),c=cc._decorator,s=c.ccclass,l=(c.property,new o.default("https://testapi.luckyin.com")),u="Asia/Shanghai",d=function(){function e(){this.token=""}var t;return t=e,e.getInstance=function(){return null===this.instance&&(this.instance=new t),this.instance},e.prototype.bet=function(e,t,r){return a(this,void 0,Promise,function(){var n;return i(this,function(a){switch(a.label){case 0:n="/pc/api/v1/blackjack/bet?betAmount="+e+"&currency="+t+"&gameId="+r,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,l.post(n,{},this.token,u)];case 2:return[2,a.sent()];case 3:throw a.sent();case 4:return[2]}})})},e.prototype.deal=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/blackjack/deal?recordId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.prototype.stop=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/blackjack/stop?recordId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.prototype.redouble=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/blackjack/redouble?recordId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.prototype.buyInsurance=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/blackjack/buyInsurance?recordId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.prototype.notBuyInsurance=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/blackjack/notBuyInsurance?recordId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.prototype.divide=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/blackjack/divide?recordId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.prototype.info=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/blackjack/info?recordId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.prototype.getgameDetail=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(r){switch(r.label){case 0:t="/pc/api/v1/game/gameDetail?gameId="+e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.post(t,{},this.token,u)];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})})},e.instance=null,t=n([s],e)}();r.default=d,cc._RF.pop()},{"./HttpClient":"HttpClient"}],LanguageLabel:[function(e,t,r){"use strict";cc._RF.push(t,"65d9fhr7xlMYqso+szk7OSt","LanguageLabel");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./LanguageManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textKey="",t.label=null,t}return a(t,e),t.prototype.onLoad=function(){this.label=this.getComponent(cc.Label),o.default.getInstance().addObserver(this.updateText.bind(this)),this.updateText()},t.prototype.updateText=function(){this.label&&this.textKey&&(this.label.string=o.default.getInstance().getText(this.textKey))},t.prototype.onDestroy=function(){o.default.getInstance().removeObserver(this.updateText.bind(this))},i([l],t.prototype,"textKey",void 0),i([s],t)}(cc.Component);r.default=u,cc._RF.pop()},{"./LanguageManager":"LanguageManager"}],LanguageManager:[function(e,t,r){"use strict";var n;cc._RF.push(t,"a1b14Qp4HBH24WR0GSTbPk7","LanguageManager"),Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageType=void 0,function(e){e.CN="cn",e.EN="en",e.JP="jp",e.FR="fr",e.Ar="ar"}(n=r.LanguageType||(r.LanguageType={}));var a=function(){function e(){this.currentLanguage=n.CN,this.languageData={},this.observers=[],this.initLanguageConfig(),this.loadLanguageSettings()}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.getNextLanguage=function(e){var t=[n.CN,n.EN,n.JP,n.Ar,n.FR],r=t.indexOf(e);return t[(r+1)%t.length]},e.prototype.initLanguageConfig=function(){var e,t,r,a,i,o,c,s,l,u,d;this.languageData={"game.start":(e={},e[n.CN]="\u6295\u6ce8",e[n.EN]="Bet",e[n.JP]="\u30d9\u30c3\u30c8",e[n.FR]="Mise",e[n.Ar]="\u0627\u0644\u0631\u0647\u0627\u0646",e),"game.hit":(t={},t[n.CN]="\u53eb\u724c",t[n.EN]="Hit",t[n.JP]="\u30d2\u30c3\u30c8",t[n.FR]="Frapper",t[n.Ar]="\u0627\u0636\u0631\u0628",t),"game.stand":(r={},r[n.CN]="\u505c\u724c",r[n.EN]="Stand",r[n.JP]="\u30b9\u30bf\u30f3\u30c9",r[n.FR]="Rester debout",r[n.Ar]="\u0627\u0644\u0648\u0642\u0648\u0641",r),"game.double":(a={},a[n.CN]="\u52a0\u500d",a[n.EN]="Double",a[n.JP]="\u30c0\u30d6\u30eb",a[n.FR]="Doubler",a[n.Ar]="\u0645\u0636\u0627\u0639\u0641\u0629",a),"game.divide":(i={},i[n.CN]="\u5206\u724c",i[n.EN]="Divide",i[n.JP]="\u30c7\u30a3\u30d0\u30a4\u30c9",i[n.FR]="Diviser",i[n.Ar]="\u0627\u0644\u0642\u0633\u0645\u0629",i),"game.BetAmount":(o={},o[n.CN]="\u6295\u6ce8\u989d",o[n.EN]="Bet amount",o[n.JP]="\u30d9\u30c3\u30c8\u91d1\u984d",o[n.FR]="Montant du pari",o[n.Ar]="\u0645\u0628\u0644\u063a \u0627\u0644\u0631\u0647\u0627\u0646",o),"game.BuyInsurance":(c={},c[n.CN]="\u4e70\u4fdd\u9669",c[n.EN]="Buy Insurance",c[n.JP]="\u4fdd\u967a\u3092\u8cb7\u3046",c[n.FR]="Cheter une assurance",c[n.Ar]="\u0634\u0631\u0627\u0621 \u0627\u0644\u062a\u0623\u0645\u064a\u0646",c),"game.NotBuyingInsurance":(s={},s[n.CN]="\u4e0d\u4e70\u4fdd\u9669",s[n.EN]="Not Buying Insurance",s[n.JP]="\u4fdd\u967a\u3092\u8cb7\u308f\u306a\u3044",s[n.FR]="Ne pas acheter d'assurance",s[n.Ar]="\u0639\u062f\u0645 \u0634\u0631\u0627\u0621 \u0627\u0644\u062a\u0623\u0645\u064a\u0646",s),"game.LanguageSwitching":(l={},l[n.CN]="\u8bed\u8a00\u5207\u6362",l[n.EN]="Language Switching",l[n.JP]="\u8a00\u8a9e\u5207\u308a\u66ff\u3048",l[n.FR]="Changement de langue",l[n.Ar]="\u062a\u0628\u062f\u064a\u0644 \u0627\u0644\u0644\u063a\u0629",l),"game.divideButton":(u={},u[n.CN]="\u5206\u724c",u[n.EN]="Divide",u[n.JP]="\u30c7\u30a3\u30d0\u30a4\u30c9",u[n.FR]="Diviser",u[n.Ar]="\u0627\u0644\u0642\u0633\u0645\u0629",u),"game.noDivideButton":(d={},d[n.CN]="\u4e0d\u5206\u724c",d[n.EN]="No Divide",d[n.JP]="\u30c7\u30a3\u30d0\u30a4\u30c9\u3057\u306a\u3044",d[n.FR]="Ne pas diviser",d[n.Ar]="\u0644\u0627 \u064a\u0642\u0633\u0645",d)}},e.prototype.loadLanguageSettings=function(){var e=cc.sys.localStorage.getItem("selectedLanguage");e&&(this.currentLanguage=e)},e.prototype.setLanguage=function(e){this.currentLanguage!==e&&(this.currentLanguage=e,cc.sys.localStorage.setItem("selectedLanguage",e),this.notifyObservers())},e.prototype.getCurrentLanguage=function(){return this.currentLanguage},e.prototype.getText=function(e){return this.languageData[e]&&this.languageData[e][this.currentLanguage]?this.languageData[e][this.currentLanguage]:e},e.prototype.addObserver=function(e){this.observers.push(e)},e.prototype.removeObserver=function(e){var t=this.observers.indexOf(e);t>-1&&this.observers.splice(t,1)},e.prototype.notifyObservers=function(){var e=this;this.observers.forEach(function(t){return t(e.currentLanguage)})},e}();r.default=a,cc._RF.pop()},{}],Player:[function(e,t,r){"use strict";cc._RF.push(t,"2b8a2ctXGZOVYUaVgnOL8BX","Player");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./Hand"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hand=new o.default,t.isDealer=!1,t}return a(t,e),t.prototype.resetHand=function(){this.hand.clear()},t.prototype.shouldHit=function(){if(this.isDealer){var e=this.hand.getScore();return e<17||17===e&&this.hasSoft17()}return!1},t.prototype.hasSoft17=function(){return 17===this.hand.getScore()&&this.hand.cards.some(function(e){return e.isAce()})},i([l],t.prototype,"isDealer",void 0),i([s],t)}(cc.Component);r.default=u,cc._RF.pop()},{"./Hand":"Hand"}]},{},["GameHttp","HttpClient","HttpRequest","Betting","Card","Deck","Game","Hand","LanguageLabel","LanguageManager","Player"]);